<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Simple counter</title>
  </head>
  <body>
    <p>Count: <span id="count"></span></p>
    <button id="button" type="button">Count Up</button>
    <script type="module">
      import {baton} from '../asset/baton.esm.js'
      const state = {count:0}
      function show(state) {
        return {
          "#count": {
            innerText: state.count
          }
        }
      }
      document.getElementById('button').addEventListener('click', (ev) => {
        withState(state => ({count: state.count + 1}))
      })
      const withState = baton(state, show, document.body)
    </script>
  </body>
</html>